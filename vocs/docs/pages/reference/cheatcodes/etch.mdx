## `etch`

### 서명

```solidity
function etch(address who, bytes calldata code) external;
```

### 설명

`who` 주소의 바이트코드를 `code`로 설정합니다.

### 예제

```solidity
bytes memory code = address(awesomeContract).code;
address targetAddr = makeAddr("target");
vm.etch(targetAddr, code);
log_bytes(address(targetAddr).code); // 0x6080604052348015610010...
```

#### 사용자 정의 프리컴파일 활성화를 위해 `vm.etch` 사용하기

Blast나 Arbitrum과 같은 일부 체인은 사용자 정의 프리컴파일(precompiles)과 함께 실행됩니다. Foundry는 바닐라 EVM에서 작동하며 이를 알지 못합니다. 사용할 수 없는 프리컴파일로 인해 리버트가 발생하는 경우, `vm.etch` 치트코드를 사용하여 누락된 프리컴파일의 모의(mock)를 나타날 것으로 예상되는 주소에 주입할 수 있습니다.

```solidity
// [!include ~/snippets/projects/cheatcodes/test/BlastMock.t.sol::all]
```

<div class="warning">

프리컴파일의 모의를 주입하는 것은 까다로울 수 있습니다. 이러한 모의는 온체인에서 실제 프리컴파일 동작을 완전히 에뮬레이션하지 않기 때문입니다.

위의 경우, 모의는 수익률 모드(yield mode)가 구성된 경우 실제 수익률이 발생하도록 하지 않습니다.

</div>

### 같이 보기

Forge 표준 라이브러리

- [`deployCode`](/reference/forge-std/deployCode.mdx)
- [`deployCodeTo`](/reference/forge-std/deployCodeTo.mdx)
