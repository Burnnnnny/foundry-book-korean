## `getCode`

### 서명

```solidity
function getCode(string calldata) external returns (bytes memory);
```

### 설명

프로젝트 내 컨트랙트의 경로가 주어지면 해당 컨트랙트의 **생성(creation)** 바이트코드를 반환합니다.

calldata 매개변수는 `ContractFile.sol` (파일 이름과 컨트랙트 이름이 같은 경우), `ContractFile.sol:ContractName` 또는 프로젝트 루트에 상대적인 아티팩트 경로 형식일 수 있습니다.

> ℹ️ **참고**
>
> `getCode`는 출력 디렉토리에 대한 읽기 권한이 필요합니다. [파일 치트코드](/reference/cheatcodes/fs.mdx)를 참조하세요.
>
> 읽기 권한을 부여하려면 `foundry.toml`에 `fs_permissions = [{ access = "read", path = "./out"}]`를 설정하세요.

### 예제

```solidity
MyContract myContract = new MyContract(arg1, arg2);

// `getCode`로 동일한 작업 수행
bytes memory args = abi.encode(arg1, arg2);
bytes memory bytecode = abi.encodePacked(vm.getCode("MyContract.sol:MyContract"), args);
address anotherAddress;
assembly {
    anotherAddress := create(0, add(bytecode, 0x20), mload(bytecode))
}

assertEq0(address(myContract).code, anotherAddress.code); // [PASS]
```

`getCode`와 [`etch`](/reference/cheatcodes/etch.mdx)를 결합하여 임의의 주소에 컨트랙트 배포

```solidity
// 배포
bytes memory args = abi.encode(arg1, arg2);
bytes memory bytecode = abi.encodePacked(vm.getCode("MyContract.sol:MyContract"), args);
address deployed;
assembly {
    deployed := create(0, add(bytecode, 0x20), mload(bytecode))
}

// 임의의 주소의 바이트코드 설정
vm.etch(targetAddr, deployed.code);
```

### 지원되는 형식

컨트랙트 경로 또는 컨트랙트 이름으로 아티팩트를 가져올 수 있습니다. 특정 버전에 대한 아티팩트 가져오기도 지원됩니다. 제공되지 않은 경우 치트코드는 실행 중인 테스트의 버전 또는 아티팩트가 컴파일된 유일한 버전으로 기본 설정됩니다.

```solidity
vm.getCode("MyContract.sol:MyContract");
vm.getCode("MyContract");
vm.getCode("MyContract.sol:0.8.18");
vm.getCode("MyContract:0.8.18");
```

### 같이 보기

[`getDeployedCode`](/reference/cheatcodes/get-deployed-code.mdx)
[`etch`](/reference/cheatcodes/etch.mdx)

Forge 표준 라이브러리

[`deployCode`](/reference/forge-std/deployCode.mdx)
[`deployCodeTo`](/reference/forge-std/deployCodeTo.mdx)

[forge-std]: /reference/forge-std/overview
